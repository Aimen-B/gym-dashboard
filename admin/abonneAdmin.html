<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Salle de Sport</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>

    <link rel="stylesheet" type="text/css" href="../date-range/lightpick.css" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../date-range/lightpick.js"></script>
  </head>
  <body class="w-full h-screen bg-neutral-800">
    <div class="relative flex w-full h-screen">
      <!-- Header / Left Side -->
      <header
        class="h-screen py-12 w-[300px] bg-neutral-800 border-r-2 border-neutral-700 flex flex-col justify-between items-center"
      >
        <div class="flex flex-col gap-14 w-full px-8">
          <!-- Name of Salle de sport -->
          <div class="flex gap-4 items-center justify-center scale-[1.2]">
            <i class="fa-solid fa-bolt fa-2xl text-emerald-200"></i>
            <p class="text-white font-semibold">XYZ</p>
          </div>

          <!-- Identity of Manager / Admin -->
          <div class="flex flex-col items-center">
            <!-- Profile Picture -->
            <div
              class="rounded-full sm:h-[70px] sm:w-[70px] h-[100px] w-[100px] bg-red-500 overflow-hidden"
            >
              <img
                class="object-fill"
                src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fdigitalfirst.bfwpub.com%2Fassess_your_strengths_brb%2Fasset%2Fch07%2Fscreen-5-and-6e-arab-male-shutterstock_136789808_compressed.jpg&f=1&nofb=1&ipt=7102080e10103733c17db262c1063d0a9a43a29f7d6f5ab6999f39dfa861c63d&ipo=images"
                alt=""
              />
            </div>
            <!-- Name of Manager / Admin -->
            <p class="text-white text-lg mt-4">Gym Admin name</p>
            <!-- Edit Profile -->
            <p
              class="px-6 py-1 border-neutral-700 text-white border-2 mt-3 rounded-full"
            >
              Edit
            </p>

            <!-- Navigation -->
            <nav class="flex flex-col w-full items-center mt-12 gap-4">
              <div
                class="p-4 w-full hover:bg-neutral-700 rounded-lg text-white flex gap-4 items-center"
              >
                <i class="fa-solid fa-grip-vertical"></i>
                <a href="acceuilAdmin.html">Acceuil</a>
              </div>
              <div
                class="p-4 w-full bg-neutral-800 hover:bg-neutral-700 rounded-lg text-white flex gap-4 items-center"
              >
                <i class="fa-solid fa-dumbbell"></i>
                <a href="#">Musculation</a>
              </div>
              <div
                class="p-4 w-full hover:bg-neutral-700 rounded-lg text-white flex gap-4 items-center"
              >
                <i class="fa-solid fa-hand-fist"></i>
                <a href="#">Martiaux</a>
              </div>
              <div
                class="p-4 w-full hover:bg-neutral-700 rounded-lg text-white flex gap-4 items-center"
              >
                <i class="fa-solid fa-gear"></i>
                <a href="#">Parametres</a>
              </div>
            </nav>
          </div>
        </div>

        <!-- Deconnecter -->
        <div class="px-8 w-full">
          <div
            class="p-4 hover:bg-neutral-700 rounded-lg text-white flex gap-4 items-center"
          >
            <i class="fa-solid fa-power-off"></i>
            <a href="#">Deconnecter</a>
          </div>
        </div>
      </header>
      <!-- page title -->
      <div class="w-[calc(100%-300px)] text-white">
        <div class="text-white text-3xl m-6 flex justify-between">
          <h1>Acceuil / Abonne</h1>
          <div class="">
            <input
              class="bg-neutral-600 rounded-xl text-sm text-center py-1 px-2"
              type="text"
              id="datepicker"
              placeholder="Date"
            />
            <button
              onclick="changeDate()"
              class="text-sm font-bold bg-neutral-600 px-3 rounded"
            >
              Submit
            </button>
          </div>
        </div>
        <!-- dashboard data -->

        <div
          class="m-6 grid grid-cols-6 gap-5 [&>*]:border [&>*]:border-neutral-400/50 [&>*]:rounded-xl [&>*]:p-4 text-xl"
        >
          <!-- numbers -->
          <div class="">
            <div class="flex justify-between">
              <p class="text-sm text-neutral-200">Total gym subscribers</p>
              <i
                class="fa-solid fa-cash-register fa-2xs mt-2 text-neutral-400"
              ></i>
            </div>
            <p class="font-bold">62</p>
          </div>
          <div>
            <div class="flex justify-between">
              <p class="text-sm text-neutral-200">New gym subscribers</p>
              <i
                class="fa-solid fa-calendar-days fa-xs text-neutral-400 mt-2"
              ></i>
            </div>
            <p class="font-bold">12</p>
          </div>
          <div>
            <div class="flex justify-between">
              <p class="text-sm text-neutral-200">Gym trainers</p>
              <i class="fa-solid fa-person fa-xs text-neutral-400 mt-2"></i>
            </div>
            <p class="font-bold">5</p>
          </div>
          <div>
            <div class="flex justify-between">
              <p class="text-sm text-neutral-200">clubs</p>
              <i class="fa-solid fa-dumbbell fa-xs text-neutral-400 mt-2"></i>
            </div>

            <p class="font-bold">9</p>
          </div>
          <div>
            <div class="flex justify-between">
              <p class="text-sm text-neutral-200">Club subscribers</p>
              <i class="fa-solid fa-dumbbell fa-xs text-neutral-400 mt-2"></i>
            </div>

            <p class="font-bold">82</p>
          </div>
          <div>
            <div class="flex justify-between">
              <p class="text-sm text-neutral-200">new club subscribers</p>
              <i class="fa-solid fa-dumbbell fa-xs text-neutral-400 mt-2"></i>
            </div>

            <p class="font-bold">21</p>
          </div>
          <!-- subs Chart -->
          <canvas class="w-[40vw]" id="daysChart"></canvas>
        </div>
        <canvas class="w-[40vw]" id="monthsChart"></canvas>
        <!-- <div class="m-6 grid grid-cols-1 gap-5 [&>*]:border [&>*]:border-neutral-400/50 upercase [&>*]:rounded-xl [&>*]:p-4 text-center text-2xl ">
                  <div class="">
                      <p class="text-sm text-neutral-200">Month income</p>
                      <p class="font-bold">965000 DA</p>
                  </div> -->
      </div>
    </div>
  </body>
  <style>
    /* ===== Scrollbar CSS ===== */
    /* Firefox */
    * {
      scrollbar-width: auto;
      scrollbar-color: #000000 #333333;
    }

    /* Chrome, Edge, and Safari */
    *::-webkit-scrollbar {
      width: 2px;
    }

    *::-webkit-scrollbar-track {
      background: #333333;
    }

    *::-webkit-scrollbar-thumb {
      background-color: #000000;
      border-radius: 10px;
      border: 3px solid #333333;
    }
  </style>

  <script>
    const daysChart = document.getElementById("daysChart");
    new Chart(daysChart, {
      type: "bar",
      data: {
        labels: [
          "dimanche",
          "lundi",
          "mardi",
          "mercredi",
          "jeudi",
          "vendredi",
          "samedi",
        ],
        datasets: [
          {
            label: "Last week subscribers",
            data: [41, 42, 40, 39, 43, 48],
            borderWidth: 1,
          },
          {
            label: "Current week subscribers",
            data: [50, 51, 55, 55, 58, 63],
            borderWidth: 1,
          },
        ],
      },
      options: {
        scales: {
          y: {
            beginAtZero: true,
          },
        },
      },
    });

    const monthsChart = document.getElementById("monthsChart");
    new Chart(monthsChart, {
      type: "bar",
      data: {
        labels: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"],
        datasets: [
          {
            label: "Last year subscribers",
            data: [50, 51, 54, 54, 57, 62, 49, 51, 56, 56, 59, 62, 50],
            borderWidth: 1,
          },
          {
            label: "Current year subscribers",
            data: [50, 51, 55, 55, 58, 63, 50, 51, 55, 55, 58, 63, 50],
            borderWidth: 1,
          },
        ],
      },
      options: {
        scales: {
          y: {
            beginAtZero: true,
          },
        },
      },
    });

    var picker = new Lightpick({
      field: document.getElementById("datepicker"),
      singleDate: false,
      onSelect: function (start, end) {
        var str = "";
        str += start ? start.format("Do MMMM YYYY") + " to " : "";
        str += end ? end.format("Do MMMM YYYY") : "...";
        document.getElementById("datepicker").innerHTML = str;
        console.log(document.getElementById("datepicker").value);
      },
    });
    function changeDate() {
      const dateRange = document.getElementById("datepicker").value;

      // Split the date range into start and end dates
      const [startDateStr, endDateStr] = dateRange.split(" - ");

      // Parse start and end dates
      const startDateParts = startDateStr.split("/");
      const endDateParts = endDateStr.split("/");

      if (startDateParts.length !== 3 || endDateParts.length !== 3) {
        alert(
          "Invalid date range format. Please use the format DD/MM/YYYY - DD/MM/YYYY."
        );
        return;
      }

      const startDay = parseInt(startDateParts[0]);
      const startMonth = parseInt(startDateParts[1]) - 1; // Months are 0-based in Date object
      const startYear = parseInt(startDateParts[2]);

      const endDay = parseInt(endDateParts[0]);
      const endMonth = parseInt(endDateParts[1]) - 1;
      const endYear = parseInt(endDateParts[2]);

      if (
        isNaN(startDay) ||
        isNaN(startMonth) ||
        isNaN(startYear) ||
        isNaN(endDay) ||
        isNaN(endMonth) ||
        isNaN(endYear)
      ) {
        alert(
          "Invalid date values. Please enter valid numbers for day, month, and year."
        );
        return;
      }

      const currentURL = new URL(window.location.href);

      // Format the start date as YYYY-MM-DD
      const formattedStartDate = new Date(startYear, startMonth, startDay)
        .toISOString()
        .slice(0, 10);

      // Set or replace the 'start_date' parameter
      currentURL.searchParams.set("start_date", formattedStartDate);

      // Format the end date as YYYY-MM-DD
      const formattedEndDate = new Date(endYear, endMonth, endDay)
        .toISOString()
        .slice(0, 10);

      // Set or replace the 'end_date' parameter
      currentURL.searchParams.set("end_date", formattedEndDate);

      // Update the URL without reloading the page
      history.replaceState(null, null, currentURL.toString());
    }
  </script>
</html>
